<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PN Digital Hub Dashboard</title>
  <link rel="stylesheet" href="Style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="branding">
      <img src="assets/pn-logo.png" alt="PN Logo" class="logo">
      <h1>Philippine Navy Digital Hub</h1>
      <p class="tagline">Monitoring & Awareness Dashboard</p>
    </div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="Articles.html">Articles</a>
      <a href="Infographics.html">Infographics</a>
      <a href="Pod.html">Podcasts</a>
      <a href="Videos.html">Video Reels</a>
      <a href="Dashboard.html" class="active">Dashboard</a>
    </nav>
  </header>

  <!-- MAIN CONTAINER -->
  <main class="container">
    <!-- Sentiment Chart -->
    <div class="card">
      <h2>Sentiment Trend (Last 7 Days)</h2>
      <canvas id="sentimentChart" height="150"></canvas>
    </div>

    <!-- Live Alerts Feed -->
    <div class="card">
      <h2>Live Alerts</h2>
      <div class="feed">
        <ul id="alertList" role="log" aria-live="polite"></ul>
      </div>
    </div>

    <!-- Mini Map -->
    <div class="card">
      <h2>Regional Sentiment & Activity Map</h2>
      <div id="map" style="width:100%; height:250px; border-radius:10px; background:#e6e6e6; display:flex; align-items:center; justify-content:center; color:#666;">
        Map Placeholder
      </div>
      <button id="resetMapBtn" style="margin-top:0.5rem; padding:0.3rem 0.6rem; font-size:0.85rem;">üîÑ Reset Map</button>
    </div>

    <!-- Google Analytics Overview -->
    <section class="ga-analytics card">
      <h2 class="section-title">Google Analytics Overview</h2>
      <div class="analytics-card">
        <p><strong>Real-time Users:</strong> <span id="gaUsers">0</span></p>
        <p><strong>Top Active Page:</strong> <span id="gaPage">-</span></p>
        <p><strong>Bounce Rate:</strong> <span id="gaBounce">0%</span></p>
        <canvas id="gaTrendChart" width="300" height="120"></canvas>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <p>&copy; 2025 Philippine Navy | Digital Hub</p>
  </footer>

  <!-- SCRIPTS -->
  <script>
    // Sentiment Chart
    const ctx = document.getElementById('sentimentChart').getContext('2d');
    const sentimentChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ["Day 1","Day 2","Day 3","Day 4","Day 5","Day 6","Day 7"],
        datasets: [
          { label:"Positive", data:[20,35,40,38,50,65,70], borderColor:"#1e90ff", backgroundColor:"rgba(30,144,255,0.2)", fill:true, tension:0.4 },
          { label:"Neutral", data:[40,38,35,30,28,25,20], borderColor:"#f1c40f", backgroundColor:"rgba(241,196,15,0.2)", fill:true, tension:0.4 },
          { label:"Negative", data:[10,12,15,20,25,30,28], borderColor:"#e74c3c", backgroundColor:"rgba(231,76,60,0.2)", fill:true, tension:0.4 }
        ]
      },
      options: { responsive:true, plugins:{ legend:{ position:"bottom" } }, scales:{ y:{ beginAtZero:true } } }
    });

    // Live Alerts
    const alerts = [
      { text: "‚ö†Ô∏è Fake ship sinking story detected.", type: "negative" },
      { text: "üî• #WestPhilippineSea trending positively.", type: "positive" },
      { text: "‚öì PN rescue operation viral video.", type: "positive" },
      { text: "üö® Bot network spreading anti-AFP propaganda.", type: "negative" },
      { text: "‚úÖ PN humanitarian mission widely shared.", type: "positive" },
      { text: "üõ∞ Satellite imagery debunked propaganda.", type: "neutral" }
    ];

    let index = 0;
    const alertList = document.getElementById("alertList");

    function getTime(){ const now=new Date(); return now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}); }

    function updateAlerts(){
      const current = alerts[index];
      const li = document.createElement("li");
      li.classList.add(`alert-${current.type}`);
      li.innerHTML = `<span>${current.text}</span> <span style="float:right;font-size:0.75rem;">${getTime()}</span>`;
      alertList.prepend(li);
      if(alertList.children.length>6){ alertList.removeChild(alertList.lastChild); }
      index=(index+1)%alerts.length;
    }
    updateAlerts();
    setInterval(updateAlerts, 4000);

    // Google Analytics Demo (Dynamic Panel)
    const gaUsers = document.getElementById("gaUsers");
    const gaPage = document.getElementById("gaPage");
    const gaBounce = document.getElementById("gaBounce");

    const pages = ["Articles.html","Dashboard.html","Pod.html","Infographics.html","Videos.html"];
    function updateGA(){
      gaUsers.textContent = Math.floor(Math.random()*50 + 1);
      gaPage.textContent = pages[Math.floor(Math.random()*pages.length)];
      gaBounce.textContent = (Math.random()*30 + 30).toFixed(1) + "%";
    }
    updateGA();
    setInterval(updateGA, 5000);

    // GA Trend Chart
    const gaCtx = document.getElementById('gaTrendChart').getContext('2d');
    const gaChart = new Chart(gaCtx, {
      type: 'line',
      data: {
        labels: ["0 min","5 min","10 min","15 min","20 min","25 min","30 min"],
        datasets: [{
          label: "Users Over Time",
          data: Array.from({length:7},()=>Math.floor(Math.random()*50 + 1)),
          borderColor: "#1e90ff",
          backgroundColor:"rgba(30,144,255,0.2)",
          fill:true,
          tension:0.4
        }]
      },
      options: { responsive:true, plugins:{ legend:{ display:false } }, scales:{ y:{ beginAtZero:true } } }
    });
  </script>
</body>
</html>
