<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PN Digital Hub Dashboard</title>
<link rel="stylesheet" href="Style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<header class="header">
  <div class="branding">
    <img src="assets/pn-logo.png" alt="PN Logo" class="logo">
    <h1>Philippine Navy Digital Hub</h1>
    <p class="tagline">Safeguarding the Information Domain</p>
  </div>
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="Articles.html">Articles</a>
    <a href="Infographics.html">Infographics</a>
    <a href="Pod.html">Podcasts</a>
    <a href="Videos.html">Video Reels</a>
    <a href="Dashboard.html" class="active">Dashboard</a>
  </nav>
</header>

<div class="container">
  <!-- Sentiment Chart -->
  <div class="card">
    <h2>Sentiment Trend (Last 7 Days)</h2>
    <canvas id="sentimentChart" height="150"></canvas>
  </div>

  <!-- Live Alerts -->
  <div class="card">
    <h2>Live Alerts Feed</h2>
    <div class="feed">
      <ul id="alertList" role="log" aria-live="polite"></ul>
    </div>
  </div>

  <!-- Map -->
  <div class="card full">
    <h2>Regional Sentiment & Maritime Activity Map</h2>
    <canvas id="mapCanvas" width="600" height="400"></canvas>
  </div>
</div>

<!-- Google Analytics Overview -->
<section class="ga-analytics card">
  <h2 class="section-title">Google Analytics Overview</h2>
  <div class="analytics-card">
    <p><strong>Real-time Users:</strong> <span id="gaUsers">12</span></p>
    <p><strong>Top Active Page:</strong> <span id="gaPage">/Articles.html</span></p>
    <p><strong>Bounce Rate:</strong> <span id="gaBounce">48%</span></p>
    <canvas id="gaTrendChart" width="300" height="120"></canvas>
  </div>
</section>

<script>
// =================== Sentiment Chart ===================
const ctx = document.getElementById('sentimentChart').getContext('2d');
const sentimentChart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: ["Day 1","Day 2","Day 3","Day 4","Day 5","Day 6","Day 7"],
    datasets: [
      { label:"Positive", data:[20,35,40,38,50,65,70], borderColor:"#1e90ff", backgroundColor:"rgba(30,144,255,0.2)", fill:true, tension:0.4 },
      { label:"Neutral", data:[40,38,35,30,28,25,20], borderColor:"#f1c40f", backgroundColor:"rgba(241,196,15,0.2)", fill:true, tension:0.4 },
      { label:"Negative", data:[10,12,15,20,25,30,28], borderColor:"#e74c3c", backgroundColor:"rgba(231,76,60,0.2)", fill:true, tension:0.4 }
    ]
  },
  options: { responsive:true, plugins:{ legend:{ position:"bottom" } }, scales:{ y:{ beginAtZero:true } } }
});

// =================== Map + Live Alerts ===================
const canvas = document.getElementById('mapCanvas');
const ctxMap = canvas.getContext('2d');

function drawMap() {
  ctxMap.fillStyle = "#cce5ff";
  ctxMap.fillRect(0,0,canvas.width,canvas.height); // ocean
  ctxMap.fillStyle = "#0a3d62";
  ctxMap.fillRect(50,50,500,300); // placeholder land
}
drawMap();

// Sample alerts with coordinates relative to canvas (x,y)
const alerts = [
  { text: "‚ö†Ô∏è Fake ship sinking story detected.", type: "negative", coords:[120,100] },
  { text: "üî• #WestPhilippineSea trending positively.", type: "positive", coords:[300,200] },
  { text: "‚öì PN rescue op video viral in Palawan.", type: "positive", coords:[250,250] },
  { text: "üö® Bot network spreading anti-AFP propaganda.", type: "negative", coords:[450,120] },
  { text: "‚úÖ PN humanitarian mission shared widely.", type: "positive", coords:[350,300] },
  { text: "üõ∞ Satellite imagery debunked propaganda.", type: "neutral", coords:[200,150] }
];

let alertIndex = 0;
const alertList = document.getElementById("alertList");

function addAlert() {
  let current = alerts[alertIndex];

  // Update live feed
  const li = document.createElement("li");
  li.className = `alert-${current.type}`;
  li.innerHTML = `<span>${current.text}</span> <span class="timestamp">${new Date().toLocaleTimeString()}</span>`;
  alertList.prepend(li);
  if(alertList.children.length>10) alertList.removeChild(alertList.lastChild);

  // Draw marker on map
  const colorMap = { positive:"#1e90ff", neutral:"#f1c40f", negative:"#e74c3c" };
  ctxMap.fillStyle = colorMap[current.type];
  ctxMap.beginPath();
  ctxMap.arc(current.coords[0], current.coords[1], 6, 0, 2*Math.PI);
  ctxMap.fill();

  alertIndex = (alertIndex + 1) % alerts.length;
}
addAlert();
setInterval(addAlert,4000);
</script>
</body>
</html>
