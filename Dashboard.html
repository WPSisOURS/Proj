<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PN Digital Hub Dashboard</title>
  <link rel="stylesheet" href="Style.css">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SQJMYBDKX1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag("js", new Date());
    gtag("config", "G-SQJMYBDKX1");
  </script>
</head>
<body>

  <!-- Header -->
  <header class="header">
    <div class="branding">
      <img src="assets/pn-logo.png" alt="PN Logo" class="logo">
      <h1>Philippine Navy Digital Hub</h1>
      <p class="tagline">Monitoring, Awareness & Information Integrity</p>
    </div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="Articles.html">Articles</a>
      <a href="Infographics.html">Infographics</a>
      <a href="Pod.html">Podcasts</a>
      <a href="Videos.html">Video Reels</a>
      <a href="Dashboard.html" class="active">Dashboard</a>
    </nav>
  </header>

  <main>
    <!-- Sentiment Chart -->
    <div class="card">
      <h2>Sentiment Trend (Last 7 Days)</h2>
      <canvas id="sentimentChart" height="150"></canvas>
    </div>

    <!-- Live Alerts Feed -->
    <div class="card">
      <h2>Live Alerts Feed</h2>
      <div class="feed">
        <ul id="alertList" role="log" aria-live="polite"></ul>
      </div>
    </div>

    <!-- Map Simulation -->
    <div class="card full">
      <h2>Regional Maritime & Sentiment Status</h2>
      <canvas id="mapSimulation" width="100%" height="250"></canvas>
    </div>

    <!-- Google Analytics Panel -->
    <section class="ga-analytics card">
      <h2 class="section-title">Google Analytics Overview</h2>
      <div class="analytics-card">
        <p><strong>Real-time Users:</strong> <span id="gaUsers">0</span></p>
        <p><strong>Top Active Page:</strong> <span id="gaPage">Home</span></p>
        <p><strong>Bounce Rate:</strong> <span id="gaBounce">0%</span></p>
        <canvas id="gaTrendChart" width="300" height="120"></canvas>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>&copy; 2025 Philippine Navy | Digital Hub</p>
  </footer>

  <script>
    /* ---------- Sentiment Chart ---------- */
    const ctxSentiment = document.getElementById('sentimentChart').getContext('2d');
    const sentimentChart = new Chart(ctxSentiment, {
      type: 'line',
      data: {
        labels: ["Day 1","Day 2","Day 3","Day 4","Day 5","Day 6","Day 7"],
        datasets: [
          { label:"Positive", data:[20,35,40,38,50,65,70], borderColor:"#1e90ff", backgroundColor:"rgba(30,144,255,0.2)", fill:true, tension:0.4 },
          { label:"Neutral", data:[40,38,35,30,28,25,20], borderColor:"#f1c40f", backgroundColor:"rgba(241,196,15,0.2)", fill:true, tension:0.4 },
          { label:"Negative", data:[10,12,15,20,25,30,28], borderColor:"#e74c3c", backgroundColor:"rgba(231,76,60,0.2)", fill:true, tension:0.4 }
        ]
      },
      options: { responsive:true, plugins:{ legend:{ position:"bottom" } }, scales:{ y:{ beginAtZero:true } } }
    });

    /* ---------- Map Simulation ---------- */
    const mapCanvas = document.getElementById('mapSimulation').getContext('2d');
    const mapSimulation = new Chart(mapCanvas, {
      type: 'bubble',
      data: {
        datasets: [
          { label:'Positive', data:[{x:2,y:2,r:15}], backgroundColor:'#1e90ff' },
          { label:'Neutral', data:[{x:5,y:3,r:15}], backgroundColor:'#f1c40f' },
          { label:'Negative', data:[{x:8,y:4,r:15}], backgroundColor:'#e74c3c' }
        ]
      },
      options: {
        responsive:true,
        plugins:{ legend:{ position:'bottom' } },
        scales:{ x:{ min:0,max:10 }, y:{ min:0,max:5 } }
      }
    });

    /* ---------- Live Alerts ---------- */
    const alerts = [
      { text:"‚ö†Ô∏è Fake ship sinking detected.", type:"negative", pos:[8,4] },
      { text:"üî• #WestPhilippineSea trending positively.", type:"positive", pos:[2,2] },
      { text:"‚úÖ PN humanitarian mission shared widely.", type:"positive", pos:[3,3] },
      { text:"üõ∞ Satellite imagery debunked propaganda.", type:"neutral", pos:[5,3] },
      { text:"üö® Bot network spreading anti-AFP propaganda.", type:"negative", pos:[7,2] }
    ];

    const alertList = document.getElementById("alertList");
    let alertIndex = 0;

    function getTime(){ const now=new Date(); return now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'}); }

    function updateAlerts(){
      const current = alerts[alertIndex];
      const li = document.createElement("li");
      li.classList.add(`alert-${current.type}`);
      li.innerHTML = `<span>${current.text}</span><span class="timestamp">${getTime()}</span>`;
      alertList.prepend(li);
      if(alertList.children.length>10) alertList.removeChild(alertList.lastChild);

      // Update map simulation bubbles
      mapSimulation.data.datasets.forEach(ds=>{
        if(ds.label.toLowerCase() === current.type) ds.data.push({x:current.pos[0],y:current.pos[1],r:15});
      });
      mapSimulation.update();

      alertIndex = (alertIndex+1) % alerts.length;
    }

    updateAlerts();
    setInterval(updateAlerts, 4000);

    /* ---------- Google Analytics Panel Simulation ---------- */
    let gaUsers = 12;
    let pages = ["Home","Articles","Infographics","Podcasts","Videos"];
    let gaBounce = 30;

    function updateGA(){
      gaUsers += Math.floor(Math.random()*5-2);
      document.getElementById('gaUsers').innerText = gaUsers <0 ? 0 : gaUsers;
      document.getElementById('gaPage').innerText = pages[Math.floor(Math.random()*pages.length)];
      gaBounce += Math.floor(Math.random()*3-1);
      document.getElementById('gaBounce').innerText = gaBounce + "%";

      const gaTrendCanvas = document.getElementById('gaTrendChart').getContext('2d');
      const gaTrendChart = new Chart(gaTrendCanvas, {
        type:'line',
        data:{ labels:["0","1","2","3","4","5"], datasets:[{label:'Users', data:[gaUsers-3,gaUsers-2,gaUsers-1,gaUsers,gaUsers+1,gaUsers+2], borderColor:'#1e90ff', fill:false, tension:0.3}] },
        options:{ responsive:true, plugins:{ legend:{ display:false } }, scales:{ y:{ beginAtZero:true } } }
      });
    }
    updateGA();
    setInterval(updateGA,5000);

  </script>
</body>
</html>
